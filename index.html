<!DOCTYPE html> 
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Space Trade Clicker V5</title>
<style>
  body {
    margin: 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #050505;
    color: #0ff;
    overflow: hidden;
    user-select: none;
  }

  /* Starfield background */
  #starfield {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    z-index: -1;
  }

  /* Layout Containers */
  #gameContainer {
    display: flex;
    height: 100vh;
    width: 100vw;
  }

  #topBar {
    position: absolute;
    top: 10px;
    left: 20px;
    font-size: 18px;
    z-index: 10;
  }

  #gameTitle {
    position: absolute;
    top: 10px;
    right: 20px;
    font-size: 26px;
    text-shadow: 0 0 10px #0ff;
    z-index: 10;
  }

  /* Left Panel: The Clicker */
  #leftPanel {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    border-right: 2px solid rgba(0, 255, 255, 0.2);
    background: rgba(0, 0, 0, 0.4);
  }

  #ship {
    width: 200px;
    height: 200px;
    background: radial-gradient(circle, #0ff 0%, #005555 70%);
    border-radius: 50%;
    cursor: pointer;
    box-shadow: 0 0 30px #0ff;
    transition: transform 0.1s;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    color: black;
    font-size: 1.2rem;
  }

  #ship:active {
    transform: scale(0.95);
  }

  /* Middle Panel: Upgrades */
  #middlePanel {
    flex: 1.5;
    padding: 100px 40px 40px 40px;
    overflow-y: auto;
    scrollbar-width: thin;
    scrollbar-color: #0ff transparent;
  }

  .upgrade-card {
    background: rgba(0, 255, 255, 0.05);
    border: 1px solid #0ff;
    padding: 15px;
    margin-bottom: 15px;
    border-radius: 8px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: 0.3s;
  }

  .upgrade-card:hover {
    background: rgba(0, 255, 255, 0.15);
  }

  .upgrade-card button {
    background: #0ff;
    color: black;
    border: none;
    padding: 8px 15px;
    cursor: pointer;
    font-weight: bold;
    border-radius: 4px;
  }

  .upgrade-card button:disabled {
    background: #333;
    color: #666;
    cursor: not-allowed;
  }

  /* Stats and UI */
  .stat-val {
    font-weight: bold;
    color: #fff;
    text-shadow: 0 0 5px #0ff;
  }

  #resetTimer {
    position: absolute;
    top: 45px;
    right: 20px;
    font-size: 14px;
    color: #f0f;
  }
</style>
</head>
<body>

<canvas id="starfield"></canvas>

<div id="topBar">
  Credits: <span id="coins" class="stat-val">0</span><br>
  Income: <span id="cps" class="stat-val">0.0</span> /s
</div>

<div id="gameTitle">NEBULA TRADER V5</div>
<div id="resetTimer">Next Cycle: <span id="timer">60</span>s</div>

<div id="gameContainer">
  <div id="leftPanel">
    <div id="ship" onclick="clickShip()">MINE ORE</div>
    <p>Click the core to generate credits</p>
  </div>

  <div id="middlePanel">
    <div id="upgradesList">
      </div>
  </div>
</div>

<script>
// Game State
let data = {
  coins: 0,
  idle: 0,
  clickPower: 1,
  upgrades: [
    { id: 0, name: "Auto-Drill", cost: 15, income: 0.5, count: 0 },
    { id: 1, name: "Cargo Sloop", cost: 100, income: 3, count: 0 },
    { id: 2, name: "Trade Station", cost: 500, income: 10, count: 0 },
    { id: 3, name: "Warp Gate", cost: 2500, income: 50, count: 0 }
  ]
};

// Core Logic
function clickShip() {
  data.coins += data.clickPower;
  updateUI();
}

function buyUpgrade(id) {
  const up = data.upgrades[id];
  if (data.coins >= up.cost) {
    data.coins -= up.cost;
    up.count++;
    up.cost = Math.floor(up.cost * 1.15); // Scale cost
    calculateIncome();
    renderUpgrades();
    updateUI();
  }
}

function calculateIncome() {
  data.idle = data.upgrades.reduce((sum, up) => sum + (up.income * up.count), 0);
}

// Timer Logic
let timeLeft = 60;
setInterval(() => {
  timeLeft--;
  if (timeLeft < 0) timeLeft = 60;
  document.getElementById('timer').innerText = timeLeft;
}, 1000);

// Game Loop
setInterval(() => {
  data.coins += (data.idle / 10);
  updateUI();
}, 100);

function updateUI() {
  document.getElementById('coins').innerText = Math.floor(data.coins);
  document.getElementById('cps').innerText = data.idle.toFixed(1);
  
  // Update button states
  data.upgrades.forEach(up => {
    const btn = document.getElementById(`btn-${up.id}`);
    if (btn) btn.disabled = data.coins < up.cost;
  });
}

function renderUpgrades() {
  const container = document.getElementById('upgradesList');
  container.innerHTML = data.upgrades.map(up => `
    <div class="upgrade-card">
      <div>
        <strong>${up.name}</strong> (Owned: ${up.count})<br>
        <small>Adds ${up.income} income/s</small>
      </div>
      <button id="btn-${up.id}" onclick="buyUpgrade(${up.id})">
        Buy: ${up.cost}
      </button>
    </div>
  `).join('');
}

// Starfield Background
function createStarfield() {
  const canvas = document.getElementById('starfield');
  const ctx = canvas.getContext('2d');
  let stars = [];

  function resize() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
  }

  function initStars() {
    stars = [];
    for (let i = 0; i < 200; i++) {
      stars.push({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height,
        size: Math.random() * 2,
        speed: Math.random() * 0.5 + 0.1
      });
    }
  }

  function animate() {
    ctx.fillStyle = 'black';
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    ctx.fillStyle = 'white';
    
    stars.forEach(star => {
      star.y += star.speed;
      if (star.y > canvas.height) star.y = 0;
      ctx.beginPath();
      ctx.arc(star.x, star.y, star.size, 0, Math.PI * 2);
      ctx.fill();
    });
    requestAnimationFrame(animate);
  }

  window.addEventListener('resize', () => { resize(); initStars(); });
  resize();
  initStars();
  animate();
}

// Init
window.onload = () => {
  createStarfield();
  renderUpgrades();
};
</script>
</body>
</html>
